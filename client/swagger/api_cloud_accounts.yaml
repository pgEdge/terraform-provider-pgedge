paths:
  /cloud-accounts:
    x-pgedge-plan: ["enterprise"]
    get:
      summary: List cloud accounts.
      description: List cloud accounts.
      operationId: listCloudAccounts
      security:
        - AccessToken: []
      tags:
        - cloud-accounts
      responses:
        "200":
          description: Response containing a list of cloud accounts.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/CloudAccount"
        "400":
          description: Bad request.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Authorization information is missing or invalid.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        default:
          description: Unexpected error.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Create a cloud account.
      description: Create a cloud account.
      operationId: createCloudAccount
      security:
        - AccessToken: []
      tags:
        - cloud-accounts
      requestBody:
        description: The cloud account details.
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateCloudAccountInput"
      responses:
        "200":
          description: Response containing details about the newly created cloud account.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CloudAccount"
        "400":
          description: Bad request.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Authorization information is missing or invalid.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        default:
          description: Unexpected error.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  /cloud-accounts/{id}:
    x-pgedge-plan: ["enterprise"]
    get:
      summary: Retrieve a cloud account.
      description: Retrieve a cloud account.
      operationId: getCloudAccount
      security:
        - AccessToken: []
      tags:
        - cloud-accounts
      parameters:
        - name: id
          in: path
          description: ID of the cloud account to retrieve.
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Response containing details about the specified cloud account.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CloudAccount"
        "400":
          description: Bad request.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Authorization information is missing or invalid.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        default:
          description: Unexpected error.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      summary: Delete a cloud account.
      description: Delete a cloud account.
      operationId: deleteCloudAccount
      security:
        - AccessToken: []
      tags:
        - cloud-accounts
      parameters:
        - name: id
          in: path
          description: ID of the cloud account to delete.
          required: true
          schema:
            type: string
      responses:
        "204":
          description: Empty response indicating that the cloud account deletion was initiated.
        "400":
          description: Bad request.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Authorization information is missing or invalid.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        default:
          description: Unexpected error.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
components:
  schemas:
    AwsCredentials:
      type: object
      required:
        - role_arn
      properties:
        role_arn:
          type: string
    AzureCredentials:
      type: object
      required:
        - tenant_id
        - subscription_id
        - client_id
        - client_secret
      properties:
        tenant_id:
          type: string
        subscription_id:
          type: string
        client_id:
          type: string
        client_secret:
          type: string
        resource_group:
          type: string
    GoogleCredentials:
      type: object
      required:
        - project_id
        - service_account
        - provider
      properties:
        project_id:
          type: string
        service_account:
          type: string
        provider:
          type: string
    CloudAccount:
      type: object
      required:
        - id
        - created_at
        - updated_at
        - name
        - type
        - properties
      properties:
        id:
          type: string
        created_at:
          type: string
        updated_at:
          type: string
        name:
          type: string
        description:
          type: string
        type:
          type: string
        properties:
          type: object
          additionalProperties: true
    CreateCloudAccountInput:
      type: object
      required:
        - type
        - credentials
      properties:
        name:
          type: string
        description:
          type: string
        type:
          type: string
        credentials:
          oneOf:
            - $ref: "#/components/schemas/AwsCredentials"
            - $ref: "#/components/schemas/AzureCredentials"
            - $ref: "#/components/schemas/GoogleCredentials"